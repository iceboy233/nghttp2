package(default_visibility = ["//visibility:public"])

cc_library(
    name = "nghttp2",
    srcs = [
        "nghttp2_buf.c",
        "nghttp2_buf.h",
        "nghttp2_callbacks.c",
        "nghttp2_callbacks.h",
        "nghttp2_debug.c",
        "nghttp2_debug.h",
        "nghttp2_extpri.c",
        "nghttp2_extpri.h",
        "nghttp2_frame.c",
        "nghttp2_frame.h",
        "nghttp2_hd.c",
        "nghttp2_hd.h",
        "nghttp2_hd_huffman.c",
        "nghttp2_hd_huffman_data.c",
        "nghttp2_hd_huffman.h",
        "nghttp2_helper.c",
        "nghttp2_helper.h",
        "nghttp2_http.c",
        "nghttp2_http.h",
        "nghttp2_int.h",
        "nghttp2_map.c",
        "nghttp2_map.h",
        "nghttp2_mem.c",
        "nghttp2_mem.h",
        "nghttp2_net.h",
        "nghttp2_npn.c",
        "nghttp2_npn.h",
        "nghttp2_option.c",
        "nghttp2_option.h",
        "nghttp2_outbound_item.c",
        "nghttp2_outbound_item.h",
        "nghttp2_pq.c",
        "nghttp2_pq.h",
        "nghttp2_priority_spec.c",
        "nghttp2_priority_spec.h",
        "nghttp2_queue.c",
        "nghttp2_queue.h",
        "nghttp2_ratelim.c",
        "nghttp2_ratelim.h",
        "nghttp2_rcbuf.c",
        "nghttp2_rcbuf.h",
        "nghttp2_session.c",
        "nghttp2_session.h",
        "nghttp2_stream.c",
        "nghttp2_stream.h",
        "nghttp2_submit.c",
        "nghttp2_submit.h",
        "nghttp2_time.c",
        "nghttp2_time.h",
        "nghttp2_version.c",
        "sfparse.c",
        "sfparse.h",
    ],
    hdrs = [
        "includes/nghttp2/nghttp2.h",
        "includes/nghttp2/nghttp2ver.h",
    ],
    includes = ["includes"],
    defines = ["NGHTTP2_STATICLIB"] + select({
        "@bazel_tools//src/conditions:linux": [
            "HAVE_ARPA_INET_H",
            "HAVE_CLOCK_GETTIME",
            "HAVE_NETINET_IN_H",
            "HAVE_TIME_H",
        ],
        "@bazel_tools//src/conditions:windows": [
            "HAVE_GETTICKCOUNT64",
            "HAVE_SYSINFOAPI_H",
        ],
    }),
)
